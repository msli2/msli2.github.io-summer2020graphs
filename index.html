<!DOCTYPE html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link
    rel="stylesheet"
    href="https://cdn.linearicons.com/free/1.0.0/icon-font.min.css"
  />
  <link
    rel="stylesheet"
    href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
  />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
</head>
<style>
  .navbar {
    background-color: #252727;
  }
  .navbar .navbar-brand {
    font-size: 24px;
  }
  .navbar a,
  .list-group-item {
    color: white;
    font-size: 16px;
  }
  body {
    font-family: "Times New Roman", Times, serif;
  }
  .d3-tip {
    line-height: 1;
    padding: 6px;
    background: #212529;
    color: #fff;
    font-size: 13px;
  }
  button,
  .card {
    border: none;
    background: none;
    display: block;
    text-align: left;
  }
  button:hover {
    background: #212529;
    color: white;
  }
  button:focus {
    outline: 0;
  }
  .card-header {
    background: none;
    font-size: 16px;
  }
  .card-body {
    font-size: 14px;
  }
  #accordion {
    border: 1px solid lightgrey;
  }
  .scroll {
    max-height: 200px;
    overflow-y: auto;
  }
  .svg-container {
    display: inline-block;
    position: relative;
    width: 100%;
    padding-bottom: 100%;
    vertical-align: top;
    overflow: hidden;
  }
  .svg-content {
    display: inline-block;
    position: absolute;
    top: 0;
    left: 0;
  }
</style>
<body>
  <script src="https://d3js.org/d3.v5.min.js"></script>
  <script src="d3-tip.js"></script>
  <nav class="navbar navbar-expand-md">
    <a class="navbar-brand" href="index.html">Summer 2020 Graphs</a>
      <ul class="navbar-nav">
        <li class="nav-item active">
          <a class="nav-link" href="index.html">Gender Differences</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="bubblechart.html">Reoccurring Actors</a>
        </li>
      </ul>
  </nav>
  <h5 style="padding-left: 15px; padding-top: 10px;">
    Gender Differences In Films
  </h5>
  <div class="container-fluid">
    <div class="row" style="padding-left: 15px;">
      <div class="col-md-3">
        <div class="tableOfContents">
          <h6
            style="
              padding-top: 10px;
              text-align: center;
              font-size: 18px;
              font-weight: 550;
            "
          >
            Female Directors
          </h6>
          <div id="accordion">
            <div class="card">
              <div
                class="card-header collapsed card-link"
                data-toggle="collapse"
                data-target="#collapseOne"
              >
                Anahita Ghazvinizadeh
              </div>
              <div id="collapseOne" class="collapse" data-parent="#accordion">
                <div class="card-body scroll">
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('They', 'Anahita Ghazvinizadeh')"
                  >
                    They
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('What Remains', 'Anahita Ghazvinizadeh')"
                  >
                    What Remains
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Needle', 'Anahita Ghazvinizadeh')"
                  >
                    Needle
                  </button>
                </div>
              </div>
            </div>
            <div class="card">
              <div
                class="card-header collapsed card-link"
                data-toggle="collapse"
                data-target="#collapseTwo"
              >
                Agnieszka Holland
              </div>
              <div id="collapseTwo" class="collapse" data-parent="#accordion">
                <div class="card-body scroll">
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Golden Dreams', 'Agnieszka Holland')"
                  >
                    Golden Dreams
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('The Wire (2004-2008)', 'Agnieszka Holland')"
                  >
                    The Wire (2004-2008)
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('House of Cards (2015-2017)', 'Agnieszka Holland')"
                  >
                    House of Cards (2015-2017)
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Rosemary\'s Baby', 'Agnieszka Holland')"
                  >
                    Rosemary's Baby
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Television Theater', 'Agnieszka Holland')"
                  >
                    Television Theater
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Spoor', 'Agnieszka Holland')"
                  >
                    Spoor
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Fever', 'Agnieszka Holland')"
                  >
                    Fever
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Olivier, Olivier', 'Agnieszka Holland')"
                  >
                    Olivier, Olivier
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Obrazki z zycia', 'Agnieszka Holland')"
                  >
                    Obrazki z zycia
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Julie Walking Home', 'Agnieszka Holland')"
                  >
                    Julie Walking Home
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Largo desolato', 'Agnieszka Holland')"
                  >
                    Largo desolato
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Fallen Angels', 'Agnieszka Holland')"
                  >
                    Fallen Angels
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('In Darkness', 'Agnieszka Holland')"
                  >
                    In Darkness
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Shot in the Heart', 'Agnieszka Holland')"
                  >
                    Shot in the Heart
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Washington Square', 'Agnieszka Holland')"
                  >
                    Washington Square
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('1983', 'Agnieszka Holland')"
                  >
                    1983
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('The Affair', 'Agnieszka Holland')"
                  >
                    The Affair
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('The Killing (2011-2012)', 'Agnieszka Holland')"
                  >
                    The Killing (2011-2012)
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Culture', 'Agnieszka Holland')"
                  >
                    Culture
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Mr. Jones', 'Agnieszka Holland')"
                  >
                    Mr. Jones
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Screen Tests', 'Agnieszka Holland')"
                  >
                    Screen Tests
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Europa Europa', 'Agnieszka Holland')"
                  >
                    Europa Europa
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Charlatan', 'Agnieszka Holland')"
                  >
                    Charlatan
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Angry Harvest', 'Agnieszka Holland')"
                  >
                    Angry Harvest
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Burning Bush', 'Agnieszka Holland')"
                  >
                    Burning Bush
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Sunday Children', 'Agnieszka Holland')"
                  >
                    Sunday Children
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('To Kill a Priest', 'Agnieszka Holland')"
                  >
                    To Kill a Priest
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Copying Beethoven', 'Agnieszka Holland')"
                  >
                    Copying Beethoven
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Treme (2010-2013)', 'Agnieszka Holland')"
                  >
                    Treme (2010-2013)
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Total Eclipse', 'Agnieszka Holland')"
                  >
                    Total Eclipse
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Something for Something', 'Agnieszka Holland')"
                  >
                    Something for Something
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Without Secrets', 'Agnieszka Holland')"
                  >
                    Without Secrets
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Cold Case (2004-2009)', 'Agnieszka Holland')"
                  >
                    Cold Case (2004-2009)
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Provincial Actors', 'Agnieszka Holland')"
                  >
                    Provincial Actors
                  </button>
                  <button class="col-md-12" onclick="chooseFilm('Ekipa')">
                    Ekipa
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('The Third Miracle', 'Agnieszka Holland')"
                  >
                    The Third Miracle
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Jesus Christ\'s Sin', 'Agnieszka Holland')"
                  >
                    Jesus Christ's Sin
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Evening at Abdon\'s', 'Agnieszka Holland')"
                  >
                    Evening at Abdon's
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Kobieta samotna', 'Agnieszka Holland')"
                  >
                    Kobieta samotna
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('The Secret Garden', 'Agnieszka Holland')"
                  >
                    The Secret Garden
                  </button>
                </div>
              </div>
            </div>
            <div class="card">
              <div
                class="card-header collapsed card-link"
                data-toggle="collapse"
                data-target="#collapseThree"
              >
                Claire Denis
              </div>
              <div id="collapseThree" class="collapse" data-parent="#accordion">
                <div class="card-body scroll">
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('The Intruder', 'Claire Denis')"
                  >
                    The Intruder
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Voilà l\'enchaînement', 'Claire Denis')"
                  >
                    Voilà l'enchaînement
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Figaro Story', 'Claire Denis')"
                  >
                    Figaro Story
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Cinéma, de notre temps', 'Claire Denis')"
                  >
                    Cinéma, de notre temps
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('No Fear, No Die', 'Claire Denis')"
                  >
                    No Fear, No Die
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Toward Mathilde', 'Claire Denis')"
                  >
                    Toward Mathilde
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('To the Devil', 'Claire Denis')"
                  >
                    To the Devil
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Lest We Forget', 'Claire Denis')"
                  >
                    Lest We Forget
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('New Reports from France (1972-1973)', 'Claire Denis')"
                  >
                    New Reports from France (1972-1973)
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Tous les garçons et les filles de leur âge...', 'Claire Denis')"
                  >
                    Tous les garçons et les filles de leur âge...
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Nenette and Boni', 'Claire Denis')"
                  >
                    Nenette and Boni
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Keep It for Yourself', 'Claire Denis')"
                  >
                    Keep It for Yourself
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('White Material', 'Claire Denis')"
                  >
                    White Material
                  </button>
                  <button class="col-md-12" onclick="chooseFilm('Bastards')">
                    Bastards
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('35 Shots of Rum', 'Claire Denis')"
                  >
                    35 Shots of Rum
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Friday Night', 'Claire Denis')"
                  >
                    Friday Night
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('À propos de Nice, la suite', 'Claire Denis')"
                  >
                    À propos de Nice, la suite
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Beau travail', 'Claire Denis')"
                  >
                    Beau travail
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('We, France\'s Undocumented Immigrants', 'Claire Denis')"
                  >
                    We, France's Undocumented Immigrants
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Chocolat', 'Claire Denis')"
                  >
                    Chocolat
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('The Breidjing Camp', 'Claire Denis')"
                  >
                    The Breidjing Camp
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Let the Sunshine In', 'Claire Denis')"
                  >
                    Let the Sunshine In
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Monologues', 'Claire Denis')"
                  >
                    Monologues
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Trouble Every Day', 'Claire Denis')"
                  >
                    Trouble Every Day
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('High Life', 'Claire Denis')"
                  >
                    High Life
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('I Can\'t Sleep', 'Claire Denis')"
                  >
                    I Can't Sleep
                  </button>
                </div>
              </div>
            </div>
            <div class="card">
              <div
                class="card-header collapsed card-link"
                data-toggle="collapse"
                data-target="#collapseFour"
              >
                Mary Harron
              </div>
              <div id="collapseFour" class="collapse" data-parent="#accordion">
                <div class="card-body scroll">
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Six Degrees', 'Mary Harron')"
                  >
                    Six Degrees
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('The L Word', 'Mary Harron')"
                  >
                    The L Word
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Anna Nicole', 'Mary Harron')"
                  >
                    Anna Nicole
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Big Love', 'Mary Harron')"
                  >
                    Big Love
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Charlie Says', 'Mary Harron')"
                  >
                    Charlie Says
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Oz', 'Mary Harron')"
                  >
                    Oz
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('The Nine', 'Mary Harron')"
                  >
                    The Nine
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('I Shot Andy Warhol', 'Mary Harron')"
                  >
                    I Shot Andy Warhol
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Six Feet Under', 'Mary Harron')"
                  >
                    Six Feet Under
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('The Notorious Bettie Page', 'Mary Harron')"
                  >
                    The Notorious Bettie Page
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Fear Itself', 'Mary Harron')"
                  >
                    Fear Itself
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('American Psycho', 'Mary Harron')"
                  >
                    American Psycho
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Sonnet for a Towncar', 'Mary Harron')"
                  >
                    Sonnet for a Towncar
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Pasadena', 'Mary Harron')"
                  >
                    Pasadena
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('The Following', 'Mary Harron')"
                  >
                    The Following
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('The Late Show', 'Mary Harron')"
                  >
                    The Late Show
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('The Moth Diaries', 'Mary Harron')"
                  >
                    The Moth Diaries
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Graceland', 'Mary Harron')"
                  >
                    Graceland
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('The Expecting', 'Mary Harron')"
                  >
                    The Expecting
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Alias Grace', 'Mary Harron')"
                  >
                    Alias Grace
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Constantine', 'Mary Harron')"
                  >
                    Constantine
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Armani', 'Mary Harron')"
                  >
                    Armani
                  </button>
                </div>
              </div>
            </div>
            <div class="card">
              <div
                class="card-header collapsed card-link"
                data-toggle="collapse"
                data-target="#collapseFive"
              >
                Mira Nair
              </div>
              <div id="collapseFive" class="collapse" data-parent="#accordion">
                <div class="card-body scroll">
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('My Own Country', 'Mira Nair')"
                  >
                    My Own Country
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Mississippi Masala', 'Mira Nair')"
                  >
                    Mississippi Masala
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Hello Bombay!', 'Mira Nair')"
                  >
                    Hello Bombay!
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Queen of Katwe', 'Mira Nair')"
                  >
                    Queen of Katwe
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('8', 'Mira Nair')"
                  >
                    8
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('September 11', 'Mira Nair')"
                  >
                    September 11
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Words with Gods', 'Mira Nair')"
                  >
                    Words with Gods
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('The Perez Family', 'Mira Nair')"
                  >
                    The Perez Family
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Migration', 'Mira Nair')"
                  >
                    Migration
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('The Reluctant Fundamentalist', 'Mira Nair')"
                  >
                    The Reluctant Fundamentalist
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('A Suitable Boy', 'Mira Nair')"
                  >
                    A Suitable Boy
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Monsoon Wedding', 'Mira Nair')"
                  >
                    Monsoon Wedding
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Amelia', 'Mira Nair')"
                  >
                    Amelia
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Hysterical Blindness', 'Mira Nair')"
                  >
                    Hysterical Blindness
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('Vanity Fair', 'Mira Nair')"
                  >
                    Vanity Fair
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('The Namesake', 'Mira Nair')"
                  >
                    The Namesake
                  </button>
                  <button
                    class="col-md-12"
                    onclick="chooseFilm('New York, I Love You', 'Mira Nair')"
                  >
                    New York, I Love You
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="container" class="svg-container col-md-8"></div>
    </div>
    <script>
      // dimensions
      var margin = { top: 40, right: 20, bottom: 120, left: 20 },
        width = 800 - margin.left - margin.right,
        height = 660 - margin.top - margin.bottom;

      var svg = d3
        .select("div#container")
        .append("svg")
        .attr("preserveAspectRatio", "xMinYMin meet")
        .attr("viewBox", "0 0 800 660")
        .classed("svg-content", true)
        .append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

      // the tooltip point to show the actor and role
      let tip = d3
        .tip()
        .attr("class", "d3-tip")
        .direction("n")
        .offset([0, 0])
        .html(function (d) {
          var content =
            "<span style='margin-left: 2.5px;'><b>" +
            "Actor: " +
            d.actor +
            "</b></span><br>" +
            "<span style='margin-left: 2.5px;'><b>" +
            "Role: " +
            d.role +
            "</b></span><br>";
          return content;
        });
      svg.call(tip);

      chooseFilm("They", "Anahita Ghazvinizadeh");

      function chooseFilm(film, director) {
        d3.csv("films.csv").then((data) => {
          d3.selectAll("svg > g > *").remove();

          dataDirector = data.filter(function (d) {
            return d.director == director;
          });

          dataFiltered = data.filter(function (d) {
            return d.film == film;
          });

          let malefemale = ["m", "f"];
          let xCoords = malefemale.map((d, i) => 200 + i * 400);
          let xScale = d3.scaleOrdinal().domain(malefemale).range(xCoords);
          let yScale = d3
            .scaleLinear()
            .domain(d3.extent(dataFiltered.map((d) => +d["space"])))
            .range([height - 50, 50]);
          let color = d3
            .scaleOrdinal()
            .domain(malefemale)
            .range(["#028090", "#ff686b"]);

          let maleNum = d3.sum(dataFiltered, (d) => d.gender == "m");
          let femaleNum = d3.sum(dataFiltered, (d) => d.gender == "f");
          var count = 0;
          var count1 = 0;
          var count2 = 0;
          var count3 = 0;
          let maleNumTotal = d3.sum(dataDirector, (d) => d.gender == "m");
          let femaleNumTotal = d3.sum(dataDirector, (d) => d.gender == "f");
          var formatSuffixDecimal2 = d3.format(".2s");

          svg
            .selectAll("g")
            .data(data)
            .enter()
            .append("text")
            .attr("transform", "translate(" + width / 2 + "," + 0 + ")")
            .style("text-anchor", "middle")
            .style("font-size", 18)
            .style("font-weight", 550)
            .text(function (d) {
              if (d.film == film && count == 0) {
                count += 1;
                return d.director;
              }
            });

          svg
            .selectAll("g")
            .data(data)
            .enter()
            .append("text")
            .attr("transform", "translate(" + width / 2 + "," + 20 + ")")
            .style("text-anchor", "middle")
            .style("font-size", 17)
            .text(function (d) {
              if (d.film == film && count1 == 0) {
                count1 += 1;
                return d.film;
              }
            });

          svg
            .append("rect")
            .style("fill", "#ff686b")
            .attr("width", width)
            .attr("height", 25)
            .attr("transform", "translate(" + 0 + "," + (height - 50) + ")");

          svg
            .append("rect")
            .style("fill", "#028090")
            .attr("width", (maleNum / (maleNum + femaleNum)) * width)
            .attr("height", 25)
            .attr("transform", "translate(" + 0 + "," + (height - 50) + ")");

          svg
            .append("text")
            .attr(
              "transform",
              "translate(" + width / 4 + "," + (height - 60) + ")"
            )
            .style("text-anchor", "middle")
            .style("font-size", 16)
            .style("font-weight", 550)
            .text("Male Actors: " + maleNum);

          svg
            .append("text")
            .attr(
              "transform",
              "translate(" + (3 * width) / 4 + "," + (height - 60) + ")"
            )
            .style("text-anchor", "middle")
            .style("font-size", 16)
            .style("font-weight", 550)
            .text("Female Actors: " + femaleNum);

          svg
            .selectAll("g")
            .data(data)
            .enter()
            .append("text")
            .attr(
              "transform",
              "translate(" + width / 2 + "," + (height + 10) + ")"
            )
            .style("text-anchor", "middle")
            .style("font-size", 17)
            .text(function (d) {
              if (d.film == film && count2 == 0) {
                count2 += 1;
                return (
                  "Director " +
                  d.director +
                  " has a total of " +
                  maleNumTotal +
                  " male actors and " +
                  femaleNumTotal +
                  " female actors throughout all her films. "
                );
              }
            });

          svg
            .selectAll("g")
            .data(data)
            .enter()
            .append("text")
            .attr(
              "transform",
              "translate(" + width / 2 + "," + (height + 30) + ")"
            )
            .style("text-anchor", "middle")
            .style("font-size", 17)
            .text(function (d) {
              if (d.film == film && count3 == 0) {
                count3 += 1;
                return (
                  "Her films have a total ratio of " +
                  formatSuffixDecimal2(maleNumTotal / femaleNumTotal) +
                  " : " +
                  formatSuffixDecimal2(femaleNumTotal / femaleNumTotal) +
                  " , male actors to female actors. "
                );
              }
            });

          var node = svg.selectAll(".persons").data(dataFiltered);

          node
            .enter()
            .append("text")
            .attr("class", "persons")
            .style("font-family", "Linearicons-Free")
            .attr("font-size", "22px")
            .text("\ue82a")
            .attr("x", (d) => xScale(d.gender))
            .attr("y", (d) => yScale(d.space))
            .style("fill", (d) => color(d.gender))
            .on("mouseover", tip.show)
            .on("mouseout", tip.hide);

          let simulation = d3
            .forceSimulation(dataFiltered)
            .force(
              "x",
              d3
                .forceX((d) => {
                  return xScale(d.gender);
                })
                .strength(1)
            )
            .force(
              "y",
              d3
                .forceY((d) => {
                  return yScale(d.space);
                })
                .strength(1)
            )
            .force(
              "collide",
              d3.forceCollide((d) => {
                return 15;
              })
            )
            .alphaDecay(0)
            .alpha(0.3)
            .on("tick", tick);

          function tick() {
            d3.selectAll(".persons")
              .attr("x", (d) => d.x)
              .attr("y", (d) => d.y);
          }

          let init_decay = setTimeout(function () {
            simulation.alphaDecay(0.1);
          }, 500);
        });
      }
    </script>
  </div>
</body>
